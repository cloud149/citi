var chatTokenUrl,chatConfigJson={identifier:"CBOL_ANG",chatVendor:"LiveEngage",lpAccountNumber:window.lpAccountNumber,customerServiceConfigCallFlag:!1,accountServiceConfigCallFlag:!1,customerDemographicsServiceTokenCallFlag:!0,divIds:"lpButtonDiv",showRightChatButtonFlag:!0,liveEngageObj:"lpTag",lpTagVersion:"1.7.0",chatConfig:{activate:"on",lob:{lobDescription:"citi-cbol-angular",chatLanguage:"en_us",lobName:"cbol-angular"},chatJS:[{src:'window.lpTag=window.lpTag||{},"undefined"==typeof window.lpTag._tagCount?(window.lpTag={site:lpTag.site||"",section:lpTag.section||"",tagletSection:lpTag.tagletSection||null,autoStart:lpTag.autoStart!==!1,ovr:lpTag.ovr||{},_v:"1.7.0",_tagCount:1,protocol:"https:",events:{bind:function(b,c,a){lpTag.defer(function(){lpTag.events.bind(b,c,a)},0)},trigger:function(b,c,a){lpTag.defer(function(){lpTag.events.trigger(b,c,a)},1)}},defer:function(a,b){0==b?(this._defB=this._defB||[],this._defB.push(a)):1==b?(this._defT=this._defT||[],this._defT.push(a)):(this._defL=this._defL||[],this._defL.push(a))},load:function(b,c,a){var d=this;setTimeout(function(){d._load(b,c,a)},0)},_load:function(d,f,c){var g=d;d||(g=this.protocol+"//"+(this.ovr&&this.ovr.domain?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site);var b=document.createElement("script");b.setAttribute("charset",f?f:"UTF-8"),c&&b.setAttribute("id",c),b.setAttribute("src",g),document.getElementsByTagName("head").item(0).appendChild(b)},init:function(){this._timing=this._timing||{},this._timing.start=(new Date).getTime();var a=this;window.attachEvent?window.attachEvent("onload",function(){a._domReady("domReady")}):(window.addEventListener("DOMContentLoaded",function(){a._domReady("contReady")},!1),window.addEventListener("load",function(){a._domReady("domReady")},!1)),"undefined"==typeof window._lptStop&&this.load()},start:function(){this.autoStart=!0},_domReady:function(a){this.isDom||(this.isDom=!0,this.events.trigger("LPT","DOM_READY",{t:a})),this._timing[a]=(new Date).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]},lpTag.init()):window.lpTag._tagCount+=1;\n'},{src:'var isConversationTopic=!1,conversationTopicArray=["ActivationComplete","AddUserSuccess","AO_AutoPayComplete","AO_BillPayPymtMade","AO_RegistrationSuccess","AppStarted","AppSubmitted","ATMAccess","BPMakePymtSuccess","CBOL_DepositsAppCompleted","CBOL_IsBillPayEnrolled","CBOL_PwdIDResetSuccess","CBOL_SecureMsgSent","DeleteUserSuccess","EditUserSuccess","GrantOnlineAccess","RegistrationComplete","RemoveOnlineAccess","SetupUserSuccess","SpendLimitGranted","TNSuccess","UpdateIncomeSuccess","AO_BTSubmit","Originations_Lead_Finish","Originations_Lead_Start","QuoteAuthDecline","ATP_Fail"];function addChatVariables(j,h){var e=getChatObjName();if(null!=e){var c=window[e];if(void 0!==c){e=getChatLPVersion();if(null!=e&&"LP"==e)c.vars.push(j,h);else if(null!=e&&"LE"==e)if(null!=typeof j&&null!=j)if("DVASessionActive"!=j||null!=typeof(e=c.section)&&e instanceof Array&&(4<(a=e.length)?e.splice(4,a-4,h):4==a&&c.section.push(h)),isConversationTopic){for(var d=0;d<conversationTopicArray.length;d++)if(conversationTopicArray[d]==j){pushServiceAttribute("service",j,h);break}}else{var a=populateConvVarObjArray(conversationTopicArray,"service",j,h);isConversationTopic&&c.sdes.push(a)}}}}function getChatObjName(){return"undefined"!=typeof chatObjName?chatObjName:null}function getChatLPVersion(){return"undefined"!=typeof lpVersion?lpVersion:null}function createConversationVariable(b,a,d){var c={},e={};return e.topic=b,e.status=a,c.type=d,c.service=e,c}function populateConvVarObjArray(e,c,b,d){for(var f=[],a=0;a<e.length;a++)e[a]==b?(isConversationTopic=!0,f.push(createConversationVariable(e[a],d,c))):f.push(createConversationVariable(e[a],null,c));return f}function pushServiceAttribute(f,e,g){var b=!1;if("undefined"!=typeof lpTag&&void 0!==lpTag.sdes){for(var d=0;d<lpTag.sdes.get("service").length;d++){var c=lpTag.sdes.get("service")[d].service.topic;null!=lpTag.sdes.get("service")[d].service.status&&lpTag.sdes.get("service").splice(d,1,createConversationVariable(c,null,f)),c==e&&(b=!0,lpTag.sdes.get("service").splice(d,1,createConversationVariable(e,g,f)))}b||lpTag.sdes.push(createConversationVariable(e,g,f))}}function getLPChatObj(){var a=getChatObjName(),b=null;return b=null!=a?window[a]:b}function addChatScopeVars(c,b,e){var a;null!=c&&null!=b&&null!=e&&((a=[]).push(c,b,e),null!=(e=getLPChatObj())&&e.sdes.push(a))}function pushLEVars(){if("undefined"!=typeof lpTag&&void 0!==lpTag.sdes){if("undefined"!=typeof LPCustomerInfo&&lpTag.sdes.push(LPCustomerInfo),"undefined"!=typeof LPPersonalInfo&&lpTag.sdes.push(LPPersonalInfo),"undefined"!=typeof LPMarketingSource&&lpTag.sdes.push(LPMarketingSource),"undefined"!=typeof LPLead&&lpTag.sdes.push(LPLead),"undefined"!=typeof LPCart&&lpTag.sdes.push(LPCart),"undefined"!=typeof LPProductView&&lpTag.sdes.push(LPProductView),"undefined"!=typeof LPOrder&&lpTag.sdes.push(LPOrder),"undefined"!=typeof LPErrorArray)for(var a=0;a<LPErrorArray.length;a++)lpTag.sdes.push(LPErrorArray[a]);"undefined"!=typeof LPServiceActivity&&lpTag.sdes.push(LPServiceActivity)}}var getContextPath=function(){for(var c="",a=(a=document.URL).split("/"),b=3;b<a.length-1;b++)a[b],c+="../";return[a=a[3],c]};function injectChatDiv(b){var c;null!=b&&null==document.getElementById(b)&&((c=document.createElement("div")).setAttribute("id",b),document.body.appendChild(c))}function pushLEVarsAjax(){var b,a={};"undefined"!=typeof type&&(a=createServiceVariable(type),b=document.URL,"undefined"!=typeof lpTag&&void 0!==lpTag.newPage&&void 0!==lpTag.section&&lpTag.newPage(b,{section:lpTag.section,sdes:[a],taglets:{rendererStub:{divIdsToKeep:{lpButtonDiv:!0,lpButtonNeedHelp:!0}}}})),"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&void 0!==lpTag.sdes.send&&lpTag.sdes.send()}function createServiceVariable(b){var a={},c={};return a.type="",null!=b&&(a.type=b),"undefined"!=typeof topic&&(c.topic=topic),"undefined"!=typeof status&&(c.status=status),"undefined"!=typeof category&&(c.category=category),"undefined"!=typeof serviceId&&(c.serviceId=serviceId),a.service=c,a}function populateSection(){"undefined"==typeof live_engage_section_array||"undefined"!=typeof lpTag&&(lpTag.section=live_engage_section_array)}function parseResponse(str){let json=str;try{json=JSON.parse(str),json=json.authorizationToken}catch(e){return json}return json}function LPGetAuthenticationToken(j){var e,f="",i="",b="";"undefined"!=typeof screenID&&(f="screenId="+screenID),"undefined"!=typeof chatConsumer&&(i="consumerApplicationId="+chatConsumer),""!=f&&(b+=f),""!=b&&""!=i?b=b+"&"+i:""!=i&&(b=i),i="undefined"!=typeof chatTokenUrl?chatTokenUrl:fetchTokenUrl,"undefined"!=typeof userIdentifier&&null!=userIdentifier&&""!==userIdentifier&&(e="userId=",b+="&"+(e+=userIdentifier)),"undefined"!=typeof companyIdentifier&&null!=companyIdentifier&&""!==companyIdentifier&&(e="companyId=",b+="&"+(e+=companyIdentifier)),""!=b&&(i=i+"?"+b);var d=new XMLHttpRequest;if(d.onreadystatechange=function(){4==d.readyState&&200==d.status&&j&&j(parseResponse(d.responseText))},d.open("GET",i,!1),d.withCredentials=!0,d.setRequestHeader("Accept","application/json"),"undefined"!=typeof generateChatUUID&&"undefined"!=typeof chatHeaderParams&&void 0===chatHeaderParams.uuid&&d.setRequestHeader("uuid",generateChatUUID()),"undefined"!=typeof chatHeaderParams)for(var h in chatHeaderParams)d.setRequestHeader(h,chatHeaderParams[h]);d.send()}'},{src:'var lpCType="";!function(){var lpSkipRestCtype="";"undefined"!=typeof VisitorType&&null!==VisitorType&&(lpCType=VisitorType),"undefined"!=typeof cinValuePropCode&&null!==cinValuePropCode&&("003"===cinValuePropCode?messagingCustomerType="CPC":"004"===cinValuePropCode&&(messagingCustomerType="RIA")),"undefined"!=typeof userBranding&&null!==userBranding&&"CPC"===userBranding?(lpCType=lpCType.trim(),lpCType+="-cpc"):("undefined"!=typeof IsCPCI&&null!==IsCPCI&&"Y"===IsCPCI?(lpCType+="-ipb-cpci",lpSkipRestCtype="Y"):"undefined"!=typeof IsIPB&&null!==IsIPB&&"Y"===IsIPB&&"undefined"!=typeof IsGEB&&null!==IsGEB&&"Y"===IsGEB?lpCType+="-ipb-geb":"undefined"!=typeof IsIPB&&null!==IsIPB&&"Y"===IsIPB&&"undefined"!=typeof IsGEB&&null!==IsGEB&&"N"===IsGEB&&(lpCType+="-ipb",/gold/i.test(CBOL_UserSegment)&&(lpCType+="-ci")),"undefined"!=typeof CBOL_UserSegment&&null!==CBOL_UserSegment&&"Y"!==lpSkipRestCtype&&(lpCType=lpCType.trim(),"undefined"!=typeof messagingCustomerType&&null!==messagingCustomerType&&"RIA"===messagingCustomerType?lpCType+="-ria":/gold/i.test(CBOL_UserSegment)?lpCType+="-gold":/priority/i.test(CBOL_UserSegment)?lpCType+="-priority":/blue/i.test(CBOL_UserSegment)?lpCType+="-blue":/sbob/i.test(CBOL_UserSegment)?lpCType+="-sbob":lpCType+=CBOL_UserSegment.trim())),"undefined"!=typeof PID&&null!==PID&&"Y"!==lpSkipRestCtype&&(/cbol/.test(VisitorType)&&(lpCType+="-mrc"),/(520)|(521)|(522)|(524)|(525)|(526)/.test(PID)?lpCType+="-costco":/(249)|(252)|(051)/.test(PID)&&(lpCType+="-CardBusiness")),"undefined"!=typeof CopsUser&&null!==CopsUser&&/true/i.test(CopsUser)&&"Y"!==lpSkipRestCtype&&(lpCType+="-collections"),lpCType=lpCType.toLowerCase(),console.log("#1 Setting lpCtype as : "+lpCType),""===lpCType&&(lpCType="cbol-blue",console.log("#1-1 Setting to default ctype as  lpCtype is blank as : "+lpCType))}();var lpCStatus="";"undefined"!=typeof ChatEligible&&null!==ChatEligible&&("true"!==ChatEligible&&"True"!==ChatEligible&&"TRUE"!==ChatEligible||(lpCStatus="ChatEligible")),"undefined"!=typeof HomePhInd&&null!==HomePhInd&&"undefined"!=typeof MobPhInd&&null!==MobPhInd&&("D"!==HomePhInd&&"D"!==MobPhInd||(lpCStatus="Unverified User"),"V"!==MobPhInd&&"W"!==MobPhInd||(lpCStatus="Cease_and_Desist"),"V"!==HomePhInd&&"W"!==HomePhInd||(lpCStatus="Cease_and_Desist")),lpCStatus=lpCStatus.toLowerCase();var lpChannel="";"undefined"!=typeof Originations_ISL&&null!==Originations_ISL&&(lpChannel=Originations_ISL),lpChannel=(lpChannel="undefined"!=typeof ContentType&&null!==ContentType?ContentType:lpChannel).toLowerCase();var lpCampaignID="";"undefined"!=typeof Originations_ContactID&&null!==Originations_ContactID&&(lpCampaignID=Originations_ContactID),lpCampaignID=(lpCampaignID="undefined"!=typeof ContentIDS&&null!==ContentIDS?ContentIDS:lpCampaignID).toLowerCase();var lpAffiliate="";"undefined"!=typeof Originations_ISN&&null!==Originations_ISN&&(lpAffiliate=Originations_ISN),lpAffiliate=(lpAffiliate="undefined"!=typeof Reinstatement_Indicator&&null!==Reinstatement_Indicator?Reinstatement_Indicator:lpAffiliate).toLowerCase();var myObj={},LPCustomerInfo={type:"ctmrinfo",info:{lastPaymentDate:{},registrationDate:{}}},myObj=LPCustomerInfo.info;null!=lpCStatus&&""!==lpCStatus&&(myObj.cstatus=lpCStatus),null!=lpCType&&""!==lpCType&&(myObj.ctype=lpCType,console.log("#2 Setting lpCtype in LPCustomerInfo as : "+lpCType)),"undefined"!=typeof AccountNumber&&null!==AccountNumber&&""!==AccountNumber&&(myObj.customerId=AccountNumber),"undefined"!=typeof MinimumPastDue&&null!==MinimumPastDue&&""!==MinimumPastDue&&(myObj.balance=MinimumPastDue),"undefined"!=typeof AccountStatusCode&&null!==AccountStatusCode&&""!==AccountStatusCode&&(myObj.socialId=AccountStatusCode),"undefined"!=typeof interdiction_result&&null!==interdiction_result&&""!==interdiction_result&&(myObj.imei=interdiction_result),"undefined"!=typeof Member_ID&&null!==Member_ID&&""!==Member_ID&&(myObj.userName=Member_ID),"undefined"!=typeof CCSID&&null!==CCSID&&""!==CCSID&&(myObj.accountName=CCSID),"undefined"!=typeof CustomerRole&&null!==CustomerRole&&""!==CustomerRole&&(myObj.role=CustomerRole),myObj=LPCustomerInfo.info.lastPaymentDate,"undefined"!=typeof PaymentDate&&null!==PaymentDate&&""!==PaymentDate&&(myObj.day=PaymentDate.substring(8,10),myObj.month=PaymentDate.substring(5,7),myObj.year=PaymentDate.substring(0,4)),myObj=LPCustomerInfo.info.registrationDate,"undefined"!=typeof DueByDate&&null!==DueByDate&&""!==DueByDate&&(myObj.day=DueByDate.substring(8,10),myObj.month=DueByDate.substring(5,7),myObj.year=DueByDate.substring(0,4));var myPhone,LPPersonalInfo={type:"personal",personal:{age:{},contacts:{}}};myObj=LPPersonalInfo.personal,"undefined"!=typeof CustomerName&&null!==CustomerName&&""!==CustomerName&&(myObj.firstname=CustomerName.substring(0,CustomerName.lastIndexOf(" ")),myObj.lastname=CustomerName.substring(CustomerName.lastIndexOf(" ")+1,CustomerName.length),"undefined"!=typeof PID&&null!==PID&&""!==PID&&(myObj.company=PID)),myObj=LPPersonalInfo.personal.age,"undefined"!=typeof PersonAge&&null!==PersonAge&&""!==PersonAge&&(myObj.age=PersonAge),"undefined"!=typeof BirthDate&&null!==BirthDate&&""!==BirthDate&&(myObj.day=BirthDate.substring(8,10),myObj.month=BirthDate.substring(5,7),myObj.year=BirthDate.substring(0,4)),myObj=LPPersonalInfo.personal.contacts,"undefined"!=typeof Email&&null!==Email&&""!==Email&&(myObj.email=Email),"undefined"!=typeof HomePhNum&&null!==HomePhNum&&""!==HomePhNum&&(myPhone=HomePhNum),"undefined"!=typeof MobPhNum&&null!==MobPhNum&&""!==MobPhNum&&(myPhone=myPhone+"|"+MobPhNum),null!=(myPhone="undefined"!=typeof BusPhNum&&null!==BusPhNum&&""!==BusPhNum?myPhone+"|"+BusPhNum:myPhone)&&""!==myPhone&&(myObj.phone=myPhone);var LPMarketingSource={type:"mrktInfo",info:{}};myObj=LPMarketingSource.info,null!=lpChannel&&""!==lpChannel&&(myObj.channel=lpChannel),null!=lpAffiliate&&""!==lpAffiliate&&(myObj.affiliate=lpAffiliate),null!=lpCampaignID&&""!==lpCampaignID&&(myObj.campaignId=lpCampaignID);var LPLead={type:"lead",lead:{}},LPServiceActivity={type:"service",service:{}},LPErrorArray=[];function setErrorCode(errorVariable,errorCode,errorMessage){null!=errorVariable&&""!==errorVariable&&LPErrorArray.push({type:"error",error:{message:errorMessage,code:errorCode}})}for("undefined"!=typeof LIKELY_TO_ATTRITE&&setErrorCode(LIKELY_TO_ATTRITE,"001","Visitor Likely to Attrite"),void 0!==LPCustomerInfo&&lpTag.sdes.push(LPCustomerInfo),void 0!==LPPersonalInfo&&lpTag.sdes.push(LPPersonalInfo),void 0!==LPMarketingSource&&lpTag.sdes.push(LPMarketingSource),void 0!==LPLead&&lpTag.sdes.push(LPLead),"undefined"!=typeof LPCart&&lpTag.sdes.push(LPCart),"undefined"!=typeof LPProductView&&lpTag.sdes.push(LPProductView),"undefined"!=typeof LPOrder&&lpTag.sdes.push(LPOrder),i=0;i<LPErrorArray.length;i++)void 0!==LPErrorArray[i]&&lpTag.sdes.push(LPErrorArray[i]);void 0!==LPServiceActivity&&lpTag.sdes.push(LPServiceActivity);var lpChatType="",lpAgentName="",lpCoBrowse="";function identityFn(callback){callback({iss:"Citi",acr:chatUtilJson.acr,sub:chatUtilJson.sub})}lpTag.events.bind("LP_OFFERS","OFFER_IMPRESSION",function(data){}),lpTag.events.bind("lpUnifiedWindow","conversationInfo",function(data){"chatting"==data.state?lpAgentName=data.agentName:"interactive"==data.state&&(s.linkTrackVars="prop48,eVar55,eVar57,eVar38,events",s.linkTrackEvents="event31",s.prop48=pageName+"|Chat Interacted",s.eVar38=pageName,s.eVar55=lpChatType+"|"+data.skill,s.eVar57=data.conversationId,s.event30="Chat Interacted",s.events="event31",s.tl(this,"o",s.prop48))}),lpTag.events.bind("lpUnifiedWindow","conversationInfo",function(data){console.log(data),"ended"==data.state&&(console.log("in ended"),s.linkTrackVars="eVar20,eVar55,eVar57",s.eVar20=lpCoBrowse+" Form:End Conversation",s.eVar55=lpChatType+"|"+data.skill,s.eVar57=data.conversationId,s.tl(this,"o",s.eVar20))}),lpTag.events.bind("lpUnifiedWindow","cobrowseAccepted",function(data){lpCoBrowse="Co-Browse"}),lpTag.identities=[],lpTag.identities.push(identityFn);'}],chatCommonModule:{name:"SharedModule",screenId:["0000"],chatLPUnit:{value:"default-cbol"},chatVars:{chatVar:[{name:"CBOL_UserSegment",sessionStorageKey:"userSegmentType"},{name:"PID",sessionStorageKey:"productId"},{name:"CardHolderType",sessionStorageKey:"cardHolderType"},{name:"HomePhNum",sessionStorageKey:"homePhNum"},{name:"HomePhInd",sessionStorageKey:"homePhInd"},{name:"BusPhNum",sessionStorageKey:"busPhNum"},{name:"BusPhInd",sessionStorageKey:"busPhInd"},{name:"MobPhNum",sessionStorageKey:"mobPhNum"},{name:"MobPhInd",sessionStorageKey:"mobPhInd"},{name:"HomePhDevType",sessionStorageKey:"HomePhDevType"},{name:"BusPhDevType",sessionStorageKey:"busPhDevType"},{name:"MobPhDevType",sessionStorageKey:"mobPhDevType"},{name:"LoggedIn",sessionStorageKey:"userLoggedIn"},{name:"ProductTypes",sessionStorageKey:"productType"},{name:"AlertDisplayed",sessionStorageKey:"alertDisplayed"},{name:"InterdictionPassed",sessionStorageKey:"interdictionPassed"},{name:"InterdictionFailed",sessionStorageKey:"interdictionFailed"},{name:"AvatarSPFExperience",sessionStorageKey:"avatarSPFExperience"},{name:"CBOL_IsBillPayEnrolled",sessionStorageKey:"billPayEnrolled"},{name:"CBOL_IsBillPayActive",sessionStorageKey:"billPayActive"},{name:"LIKELY_TO_ATTRITE",sessionStorageKey:"likelyToAttrite"},{name:"CONSUMER_CLIENT_CODE",sessionStorageKey:"consumerClientCode"},{name:"LIKELY_TO_ATTRITE_ACTION_TAG",sessionStorageKey:"likelyToAttriteActionTag"},{name:"ErrorCount",sessionStorageKey:"errorCount"},{name:"SiteID",sessionStorageKey:"siteId"},{name:"SBOB_Tier_Type",sessionStorageKey:"userBusinessTierType"},{name:"VisitorType",sessionStorageKey:"visitorType"},{name:"CopsUser",sessionStorageKey:"copsUser"},{name:"language",sessionStorageKey:"languageCode"},{name:"customerId",sessionStorageKey:"siteCatalystBean.ccsid"},{name:"IsIPB",sessionStorageKey:"isIPB"},{name:"IsGEB",sessionStorageKey:"isGEB"},{name:"IsCPCI",sessionStorageKey:"isCPCI"},{name:"IsCPC",sessionStorageKey:"isCPC"},{name:"userBranding",sessionStorageKey:"userBranding"},{name:"cinValuePropCode",sessionStorageKey:"cinValuePropCode"},{name:"serviceLinksBean",sessionStorageKey:"serviceLinksBean"},{name:"PageName",jsValue:"pageName"},{name:"PageDef",jsValue:"pageDefNGA"},{name:"journeyname",jsValue:"journeyName"},{name:"CCSID",jsValue:"CCSID"}]}},chatModule:[{name:"accountInfo",screenId:["Dashboard","ADA","jcbol_common_Dashboard","dlp landing","NGA_MRCDASHBOARD","dlp error","dlp offers","dlp noOffers","dlp missingMandatoryInfo","dlp incomeUpdate","dlp input","dlp recap","dlp approved","dlp declined","dlp pended","dlp counterOffer","dlp counterAccepted","dlp counterApproved","dlp pendedMissingInfo","dlp counterMissingInfo","dlp disbursementConfirmation","dlp docUpload","dlp thankYou"],chatLPUnit:{value:"65536"},chatVars:{chatVar:[{name:"CBOL_UserSegment",sessionStorageKey:"userSegmentType"}]}},{name:"contactus",screenId:["contact us"],chatLPUnit:{value:"65536"},chatVars:{chatVar:[{name:"CBOL_UserSegment",sessionStorageKey:"userSegmentType"}]}}],chatFilter:{screenId:{activate:"off",value:["00"]}}}},chatConsumer="default",chatShowView=!1,agentAvailable=!1,chatSectionArr=[],chatPayloadJson={},userIdentifier="",companyIdentifier="",chatHeaderParams={},chatLPVars={},lpSectionArray=["journeyname","PageDef","PageName","ProcessStep","CCSID"],triggerCounter=0,lpTagSdes={},chatUtilJson={},generateChatUUID=function(){var a=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var b=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===d?b:3&b|8).toString(16)})};function initChat(chatResponseVariables,screenIdentifier,conCallback){var chatLiveEngageVariableMap="";null!=chatResponseVariables&&""!==chatResponseVariables?chatLiveEngageVariableMap=chatResponseVariables:"undefined"!=typeof chatServiceUrl&&null!==chatServiceUrl&&""!==chatServiceUrl&&(chatLiveEngageVariableMap=chatServiceUrl),setChatTokenUrl(chatLiveEngageVariableMap);void 0!==screenIdentifier&&null!=screenIdentifier||(screenIdentifier="undefined"!=typeof screenID&&""!==screenID?screenID:"common_chat"),"undefined"!=typeof screenID&&""===screenID&&(screenID=screenIdentifier);var linkVariableMap="false",chatConfigCallResponse={};if(void 0!==screenIdentifier&&""!==screenIdentifier?chatConfigCallResponse.screenID=screenIdentifier:"undefined"!=typeof screenID&&""!==screenID&&(chatConfigCallResponse.screenID=screenID),void 0!==chatConfigJson&&null!=chatConfigJson&&""!==chatConfigJson){if("on"===chatConfigJson.chatConfig.chatFilter.screenId.activate?linkVariableMap=-1!==chatConfigJson.chatConfig.chatFilter.screenId.value.indexOf(screenIdentifier)?"true":"false":"off"===chatConfigJson.chatConfig.chatFilter.screenId.activate&&(linkVariableMap=-1!==chatConfigJson.chatConfig.chatFilter.screenId.value.indexOf(screenIdentifier)?"false":"true"),"true"==linkVariableMap){chatConfigCallResponse.chatFeatureEnabledFlag=!0,chatConfigCallResponse.chatVendor=chatConfigJson.chatVendor,chatConfigCallResponse.consumerIdentfier=chatConfigJson.identifier;var jsFiles={};if(void 0!==chatConfigJson.chatConfig.chatJS&&null!==chatConfigJson.chatConfig.chatJS)for(var jsFile in chatConfigJson.chatConfig.chatJS)jsFiles[chatConfigJson.chatConfig.chatJS[jsFile].src]=chatConfigJson.chatConfig.chatJS[jsFile].src;chatConfigCallResponse.jsFiles=jsFiles;var chatResponseVariables={},chatInitiationPageVariableMap={},chatSectionVariableList={},chatClientStorageVariableMap={};if(null!=chatConfigJson.chatConfig.chatCommonModule&&null!=chatConfigJson.chatConfig.chatCommonModule.chatVars&&null!=chatConfigJson.chatConfig.chatCommonModule.chatVars.chatVar)for(var key in chatConfigJson.chatConfig.chatCommonModule.chatVars.chatVar)chatConfigJson.chatConfig.chatCommonModule.chatVars.chatVar.hasOwnProperty(key)&&(jsVarName=chatConfigJson.chatConfig.chatCommonModule.chatVars.chatVar[key].name,jsVarValue=chatConfigJson.chatConfig.chatCommonModule.chatVars.chatVar[key].jsValue,sessionStorageKey=chatConfigJson.chatConfig.chatCommonModule.chatVars.chatVar[key].sessionStorageKey,void 0!==jsVarName&&null!=jsVarValue&&(-1<lpSectionArray.indexOf(jsVarName)?chatSectionVariableList[jsVarName]=jsVarValue:chatInitiationPageVariableMap[jsVarName]=jsVarValue),void 0!==jsVarName&&null!=sessionStorageKey&&(chatClientStorageVariableMap[jsVarName]=sessionStorageKey));if(null!=chatConfigJson.chatConfig.chatModule)for(var key in chatConfigJson.chatConfig.chatModule)if(chatConfigJson.chatConfig.chatModule.hasOwnProperty(key)){var screenIdsModule=chatConfigJson.chatConfig.chatModule[key].screenId;if(null!=screenIdsModule&&-1<screenIdsModule.indexOf(screenIdentifier)){var jsVarName,jsVarValue,sessionStorageKey,chatModuleVars=chatConfigJson.chatConfig.chatModule[key].chatVars;if(null!=chatModuleVars)for(var key in chatModuleVars.chatVar)chatModuleVars.chatVar.hasOwnProperty(key)&&(jsVarName=chatModuleVars.chatVar[key].name,jsVarValue=chatModuleVars.chatVar[key].jsValue,sessionStorageKey=chatModuleVars.chatVar[key].sessionStorageKey,void 0!==jsVarName&&null!=jsVarValue&&(-1<lpSectionArray.indexOf(jsVarName)?chatSectionVariableList[jsVarName]=jsVarValue:chatInitiationPageVariableMap[jsVarName]=jsVarValue),void 0!==jsVarName&&null!=sessionStorageKey&&(chatClientStorageVariableMap[jsVarName]=sessionStorageKey))}}chatResponseVariables.chatInitiationPageVariableMap=chatInitiationPageVariableMap,chatResponseVariables.chatSectionVariableList=chatSectionVariableList,chatResponseVariables.chatClientStorageVariableMap=chatClientStorageVariableMap;var chatLiveEngageVariableMap={},divIdMap={},linkVariableMap={};if(void 0!==chatConfigJson.divIds){var divId,divIdArray=chatConfigJson.divIds.split(",");for(divId in divIdArray)divIdArray.hasOwnProperty(divId)&&("lpButtonDiv"===divIdArray[divId]?divIdMap.right=divIdArray[divId]:"lpButtonNeedHelp"===divIdArray[divId]&&(divIdMap.bottom=divIdArray[divId]))}void 0!==chatConfigJson.showRightChatButtonFlag&&(linkVariableMap.showRightChatButtonFlag=""+chatConfigJson.showRightChatButtonFlag),void 0!==chatConfigJson.showRightChatButtonForPrintFlag?linkVariableMap.showRightChatButtonForPrintFlag=""+chatConfigJson.showRightChatButtonForPrintFlag:linkVariableMap.showRightChatButtonForPrintFlag="false",chatLiveEngageVariableMap.divIdMap=divIdMap,chatLiveEngageVariableMap.linkVariableMap=linkVariableMap,chatConfigCallResponse.chatLinkVariables=chatLiveEngageVariableMap;chatLiveEngageVariableMap={};void 0!==chatConfigJson.lpAccountNumber&&(chatLiveEngageVariableMap.LPAccount=""+chatConfigJson.lpAccountNumber),void 0!==chatConfigJson.lpAccountNumberSecondary&&(chatLiveEngageVariableMap.LPAccountSecondary=""+chatConfigJson.lpAccountNumberSecondary),void 0!==chatConfigJson.liveEngageObj&&(chatLiveEngageVariableMap.chatObjName=chatConfigJson.liveEngageObj),void 0!==chatConfigJson.lpTagVersion&&(chatLiveEngageVariableMap.lpTagVersion=chatConfigJson.lpTagVersion),chatLiveEngageVariableMap.lpVersion="LE",chatResponseVariables.chatLiveEngageVariableMap=chatLiveEngageVariableMap,chatConfigCallResponse.chatResponseVariables=chatResponseVariables}else chatConfigCallResponse.chatFeatureEnabledFlag=!1,chatConfigCallResponse.consumerIdentfier=chatConfigJson.identifier;console.log(chatConfigCallResponse),chatCallback(chatConfigCallResponse),"undefined"!=typeof chatSiteCatTagging&&"function"==typeof chatSiteCatTagging&&window.chatSiteCatTagging()}}function getChatConfig(screenID){initChat&&"undefined"!=typeof chatServiceUrl&&initChat(chatServiceUrl,screenID)}function postChatConfig(screenID){var reqQueryParams="screenId=",chatUrl="";setChatTokenUrl(chatUrl="undefined"!=typeof chatServiceUrl&&null!=chatServiceUrl&&""!==chatServiceUrl?chatServiceUrl:chatUrl);void 0!==screenID?(reqQueryParams+=screenID,void 0===window.screenID&&(window.screenID=screenID)):reqQueryParams+="common_chat";var key,reqQueryParams=reqQueryParams+"&"+("consumerApplicationId="+chatConsumer),request=new XMLHttpRequest;for(key in request.onreadystatechange=function(){var res;4===request.readyState&&200===request.status&&(res=JSON.parse(request.responseText),window.chatCallback(res),void 0!==res&&void 0!==res.chatFeatureEnabledFlag&&(chatShowView=res.chatFeatureEnabledFlag))},request.open("POST",chatUrl+"?"+reqQueryParams,!0),request.setRequestHeader("Accept","application/json"),request.setRequestHeader("Content-Type","application/json"),void 0!==chatHeaderParams&&void 0===chatHeaderParams.uuid&&request.setRequestHeader("uuid",generateChatUUID()),request.withCredentials=!0,chatHeaderParams)request.setRequestHeader(key,chatHeaderParams[key]);request.send(JSON.stringify(chatPayloadJson))}function addChatDiv(a){null!=a&&(null!=a.right&&createChatDiv(a.right),null!=a.bottom&&createChatDiv(a.bottom))}function createChatDiv(b){var c;null!=b&&null==document.getElementById(b)&&("lpButtonDiv"===b?setTimeout(function(){var f;null==document.getElementById(b)&&((f=document.createElement("div")).setAttribute("id",b),document.body.appendChild(f))},3e3):((c=document.createElement("div")).setAttribute("id",b),document.body.appendChild(c)))}function injectFooterChatDiv(){createChatDiv("lpButtonNeedHelp")}function setChatConsumer(consumer){void 0!==consumer&&(chatConsumer=consumer)}function startChat(){var b=document.getElementById("lpButtonDiv");null!=b&&null!=b.firstElementChild&&null!=b.firstElementChild.firstElementChild&&0<b.firstElementChild.firstElementChild.childElementCount?b.firstElementChild.firstElementChild.click():null!=(b=document.getElementById("lpButtonNeedHelp"))&&null!=b.firstElementChild&&null!=b.firstElementChild.firstElementChild&&null!=b.firstElementChild.firstElementChild.firstElementChild&&b.firstElementChild.firstElementChild.firstElementChild.click()}function hideChatDiv(){var chatLPBtnDiv=document.getElementById("lpButtonDiv");null!=chatLPBtnDiv?(chatLPBtnDiv.style.display="none",null!=chatLPBtnDiv.firstChild&&(chatLPBtnDiv.firstChild.style.display="none")):null!=(chatLPBtnDiv=document.getElementById("lpButtonNeedHelp"))&&(chatLPBtnDiv.style.display="none"),setInterval(function(){chatLPBtnDiv.style.display="none"},500)}function endChatSession(){var chatEndConfirmBtn,chatEndCloseBtn=document.getElementsByClassName("lp_close")[0];chatEndCloseBtn&&(chatEndCloseBtn.click(),"undefined"!==(chatEndConfirmBtn=document.getElementsByClassName("lp_confirm_button")[0])&&setTimeout(function(){chatEndConfirmBtn.click()},500))}function pushLEVarsAjax(){var pageURL;"undefined"!=typeof type&&(pageURL=document.URL,"undefined"!=typeof lpTag&&void 0!==lpTag.newPage&&void 0!==lpTag.section&&lpTag.newPage(pageURL,{section:lpTag.section,sdes:[],taglets:{rendererStub:{divIdsToKeep:{lpButtonDiv:!0,lpButtonNeedHelp:!0}}}})),"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&void 0!==lpTag.sdes.send&&lpTag.sdes.send()}function getCustomerInfo(x){var lastPaymentDate,regDateArr,ctmrInfoObj={},chatLPCustomerInfo={type:"ctmrinfo"};"CRS_FUSION_ACQ"===x||"CRS_FUSION_ACQ"===chatConsumer||"CRS_FUSION_SRV"!==x&&"CRS_FUSION_SRV"!==chatConsumer||(lastPaymentDate={},null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.lastPaymentDate&&""!==chatLPVars.lastPaymentDate?9<chatLPVars.lastPaymentDate.length?(lastPaymentDate.day=chatLPVars.lastPaymentDate.substring(3,5),lastPaymentDate.month=chatLPVars.lastPaymentDate.substring(0,2),lastPaymentDate.year=chatLPVars.lastPaymentDate.substring(6,11)):(accountName=chatLPVars.lastPaymentDate.split("/"),lastPaymentDate.day=accountName[1],lastPaymentDate.month=accountName[0],lastPaymentDate.year=accountName[2]):void 0!==window.lastPaymentDate&&(x=window.lastPaymentDate,9<window.lastPaymentDate.length?(lastPaymentDate.day=x.substring(3,5),lastPaymentDate.month=x.substring(0,2),lastPaymentDate.year=x.substring(6,11)):(accountName=window.lastPaymentDate.split("/"),lastPaymentDate.day=accountName[1],lastPaymentDate.month=accountName[0],lastPaymentDate.year=accountName[2])),accountName={},null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.registrationDate&&""!==chatLPVars.registrationDate?(regDateArr=chatLPVars.registrationDate.split("-"),accountName.day=regDateArr[2],accountName.month=regDateArr[1],accountName.year=regDateArr[0]):void 0!==window.registrationDate&&(regDateArr=window.registrationDate.split("-"),accountName.day=regDateArr[2],accountName.month=regDateArr[1],accountName.year=regDateArr[0]),isObjEmpty(lastPaymentDate)||(ctmrInfoObj.lastPaymentDate=lastPaymentDate),isObjEmpty(accountName)||(ctmrInfoObj.registrationDate=accountName));var accountName="";null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.ctype&&""!==chatLPVars.ctype?accountName=chatLPVars.ctype:void 0===window.lpCType&&void 0===window.lpCType||(accountName=window.lpCType),null!==accountName&&""!==accountName&&"null"!==accountName&&(ctmrInfoObj.ctype=accountName,console.log("#3 Setting lpCtype in ctmrInfoObj as : "+accountName));accountName="";null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.cstatus&&""!==chatLPVars.cstatus?accountName=chatLPVars.cstatus:void 0===window.cstatus&&void 0===window.cstatus||(accountName=window.cstatus),null!==accountName&&""!==accountName&&"null"!==accountName&&(ctmrInfoObj.cstatus=accountName);accountName="";null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.role&&""!==chatLPVars.role?accountName=chatLPVars.role:void 0===window.role&&void 0===window.role||(accountName=window.role),null!==accountName&&""!==accountName&&"null"!==accountName&&(ctmrInfoObj.role=accountName);accountName="";null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.customerId?accountName=chatLPVars.customerId:void 0===window.customerId&&void 0===window.customerId||(accountName=window.customerId),null!==accountName&&"null"!==accountName&&(ctmrInfoObj.customerId=accountName);accountName="";return null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.accountName?accountName=chatLPVars.accountName:void 0===window.accountName&&void 0===window.accountName||(accountName=window.accountName),null!==accountName&&""!==accountName&&"null"!==accountName&&(ctmrInfoObj.accountName=accountName),isObjEmpty(ctmrInfoObj)||(chatLPCustomerInfo.info=ctmrInfoObj),chatLPCustomerInfo}function getPersonalInfo(consumer){var chatLPPersonalInfo={type:"personal"},personalInfoObj={},contactsObj={},contactsArr=[],custEmail="";return null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.email?custEmail=chatLPVars.email:void 0===window.email&&void 0===window.email||(custEmail=window.email),null!==custEmail&&""!==custEmail&&(contactsObj.email=custEmail),isObjEmpty(contactsObj)||contactsArr.push(contactsObj),isObjEmpty(contactsArr)||(personalInfoObj.contacts=contactsArr),isObjEmpty(personalInfoObj)||(chatLPPersonalInfo.personal=personalInfoObj),chatLPPersonalInfo}function getServiceInfo(consumer){var chatLPServiceInfo={type:"service"},serviceInfoObj={},topic="",status="";return null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.topic?topic=chatLPVars.topic:void 0===window.topic&&void 0===window.topic||(topic=window.topic),null!==topic&&""!==topic&&(serviceInfoObj.topic=topic),null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.status?status=chatLPVars.status:void 0===window.status&&void 0===window.status||(status=window.status),null!==status&&""!==status&&(serviceInfoObj.status=status),isObjEmpty(serviceInfoObj)||(chatLPServiceInfo.service=serviceInfoObj),chatLPServiceInfo}function getViewedProductInfo(consumer){var chatLPViewedProdInfo={type:"cart"},viewedProductObj={},productObj={},productsArr=[],productName="",productQty="";return null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.productName?productName=chatLPVars.productName:void 0===window.productName&&void 0===window.productName||(productName=window.productName),null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.productQuantity?productQty=chatLPVars.productQuantity:void 0===window.productQuantity&&void 0===window.productQuantity||(productQty=window.productQuantity),null!==productName&&""!==productName&&(productObj.name=productName),isObjEmpty(productObj)||(viewedProductObj.product=productObj),null!==productQty&&""!==productQty&&(viewedProductObj.quantity=productQty),isObjEmpty(viewedProductObj)||productsArr.push(viewedProductObj),isObjEmpty(productsArr)||(chatLPViewedProdInfo.products=productsArr),chatLPViewedProdInfo}function isObjEmpty(obj){if(null!=obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}}function isSafari(){var i=navigator.userAgent.toLowerCase(),t=!1;try{t=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString()}catch(i){}return t||-1!==i.indexOf("safari")&&!(-1!==i.indexOf("chrome"))&&-1!==i.indexOf("version/")}function setLPErrorMessage(errorMessage){null!=errorMessage&&""!==errorMessage&&"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&lpTag.sdes.push({type:"error",error:{message:errorMessage}})}function setLPChatVars(name,value){void 0!==name&&null!=name&&""!==name&&void 0!==value&&(chatLPVars[name]=value)}function setChatHeaderParams(name,value){void 0!==name&&null!=name&&""!==name&&void 0!==value&&(chatHeaderParams[name]=value)}function setChatTokenUrl(url){void 0!==url&&null!=url&&""!==url&&(chatTokenUrl=url.replace("configurations","token"))}function chatCallback(response){if(null!=response)if("Error"!==response&&!1!==response.chatFeatureEnabledFlag&&"LiveEngage"===response.chatVendor){chatShowView=!0;var chatDiv=document.getElementById("chatDiv");if(null==chatDiv&&createChatDiv("chatDiv"),null!=(chatDiv=document.getElementById("chatDiv"))){if(chatDiv.innerHTML="",null!=response.maskJsonCommon&&(M=response.maskJsonCommon,x=document.createElement("script"),t=document.createTextNode("var maskJsonCommon = "+JSON.stringify(M)+";"),x.appendChild(t),chatDiv.appendChild(x)),null!=response.maskJsonForModule&&(N=response.maskJsonForModule,x=document.createElement("script"),t=document.createTextNode("var maskJsonForModule = "+JSON.stringify(N)+";"),x.appendChild(t),chatDiv.appendChild(x)),null!=response.chatResponseVariables&&null!=response.chatResponseVariables.chatLiveEngageVariableMap){var responseObj="",x=document.createElement("script");for(key in response.chatResponseVariables.chatLiveEngageVariableMap)response.chatResponseVariables.chatLiveEngageVariableMap.hasOwnProperty(key)&&(responseObj+="var "+key+' = "'+response.chatResponseVariables.chatLiveEngageVariableMap[key]+'";\n');if(null!=response.chatResponseVariables&&null!=response.chatResponseVariables.chatInitiationPageVariableMap)for(var key in response.chatResponseVariables.chatInitiationPageVariableMap)response.chatResponseVariables.chatInitiationPageVariableMap.hasOwnProperty(key)&&(response.chatResponseVariables.chatInitiationPageVariableMap[key],null==response.chatResponseVariables.chatInitiationPageVariableMap[key]||void 0===window[response.chatResponseVariables.chatInitiationPageVariableMap[key]]&&void 0===window.value||(responseObj+="var "+key+" = "+response.chatResponseVariables.chatInitiationPageVariableMap[key]+";\n"));var t=document.createTextNode(responseObj);x.appendChild(t),chatDiv.appendChild(x)}null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.lpAccountSecondary&&"MB"===chatLPVars.lpAccountSecondary&&"undefined"!=typeof LPAccount&&"undefined"!=typeof LPAccountSecondary&&(LPAccount=LPAccountSecondary);x=document.createElement("script"),t=document.createTextNode('if (typeof lpTag == "undefined"){\n lpTag={};\nif(typeof LPAccount != "undefined")\nlpTag.site=LPAccount;\nlpTag.sdes=lpTag.sdes||[];\n}');if(x.appendChild(t),chatDiv.appendChild(x),null!=response.chatResponseVariables&&null!=response.chatResponseVariables.chatVariableMap){responseObj="";for(key in response.chatResponseVariables.chatVariableMap)response.chatResponseVariables.chatVariableMap.hasOwnProperty(key)&&(responseObj+="var "+key+' = "'+response.chatResponseVariables.chatVariableMap[key]+'";\n');""!==responseObj&&(t=document.createTextNode(responseObj),(x=document.createElement("script")).appendChild(t),chatDiv.appendChild(x))}if(null!=response.chatResponseVariables&&null!=response.chatResponseVariables.chatClientStorageVariableMap){responseObj="";if(null!==sessionStorage.getItem("sessionPostBrandingStorage")&&""!==sessionStorage.getItem("sessionPostBrandingStorage")){var D,y,c=JSON.parse(sessionStorage.getItem("sessionPostBrandingStorage"));for(D in response.chatResponseVariables.chatClientStorageVariableMap)!response.chatResponseVariables.chatClientStorageVariableMap.hasOwnProperty(D)||void 0!==(y=response.chatResponseVariables.chatClientStorageVariableMap[D])&&""!==y&&void 0!==c&&(void 0!==c[y]&&"object"==typeof c[y]?responseObj+="var "+D+" = "+JSON.stringify(c[y])+" ;\n":void 0!==c[y]&&""!==c[y]?responseObj+="var "+D+' = "'+c[y]+'";\n':2===(y=y.split(".")).length&&(responseObj+="var "+D+' = "'+c[y[0]][y[1]]+'";\n'));""!==responseObj&&(t=document.createTextNode(responseObj),(x=document.createElement("script")).appendChild(t),chatDiv.appendChild(x))}}chatUtilJson.acr="loa1","undefined"!=typeof customerId&&(chatUtilJson.sub=customerId);var N,B,M="";""!==(M=null!==response.screenID&&""!==response.screenID?response.screenID:M)&&(N="",isScreenIdPreLogin(M)&&(N+='var VisitorType = "'+sessionStorage.getItem("preLoginVisitorType")+'";\n',chatUtilJson.acr="0",chatUtilJson.sub=generateChatUUID()),""!==N&&(M=document.createTextNode(N),(N=document.createElement("script")).appendChild(M),chatDiv.appendChild(N))),null!=response.chatLinkVariables&&null!=response.chatLinkVariables.divIdMap&&addChatDiv(response.chatLinkVariables.divIdMap),null==response.chatLinkVariables||null==response.chatLinkVariables.divIdMap||null==response.chatLinkVariables.linkVariableMap||void 0!==(B=response.chatLinkVariables.linkVariableMap).showRightChatButtonFlag&&"false"===B.showRightChatButtonFlag&&hideChatDiv(),null==response.chatLinkVariables||null==response.chatLinkVariables.linkVariableMap||void 0!==(B=response.chatLinkVariables.linkVariableMap).showRightChatButtonForPrintFlag&&"false"===B.showRightChatButtonForPrintFlag&&(lpResourcesLoadedFlag=document.createTextNode("@media print{ #lpButtonDiv { display:none; } }"),(chatLPCustomerInfo=document.createElement("style")).appendChild(lpResourcesLoadedFlag),chatDiv.appendChild(chatLPCustomerInfo));var chatLPCustomerInfo,lpResourcesLoadedFlag=!1;if(void 0===lpTag.newPage){if(null!=response.jsFiles){var i,jsFileMap=response.jsFiles,responseObj="";for(i in jsFileMap){responseObj=jsFileMap[i];t=document.createTextNode(responseObj);(x=document.createElement("script")).appendChild(t),chatDiv.appendChild(x)}}}else lpResourcesLoadedFlag=!0;if(null!=response.chatResponseVariables&&null!=response.chatResponseVariables.chatSectionVariableList){chatSectionArr=[];responseObj="";if("undefined"!=typeof lpTag){for(var sectionVarVal,j=0;j<lpSectionArray.length;j++)null!=lpSectionArray[j]&&response.chatResponseVariables.chatSectionVariableList.hasOwnProperty(lpSectionArray[j])?(sectionVarVal=response.chatResponseVariables.chatSectionVariableList[lpSectionArray[j]],void 0!==window[sectionVarVal]?chatSectionArr.push(window[sectionVarVal]):void 0!==window.sectionVarVal?chatSectionArr.push(window.sectionVarVal):null!=chatLPVars[sectionVarVal]?chatSectionArr.push(chatLPVars[sectionVarVal]):chatSectionArr.push("")):chatSectionArr.push("");null==response.consumerIdentfier||"CRS_FUSION_SRV"!==response.consumerIdentfier&&"CRS_FUSION_ACQ"!==response.consumerIdentfier||null!=chatSectionArr[0]&&(chatSectionArr[0]="copsuser="+chatSectionArr[0]),null!==chatLPVars&&""!==chatLPVars&&null!=chatLPVars.language&&""!==chatLPVars.language&&"spanish"===chatLPVars.language?chatSectionArr.push("lang=es"):chatSectionArr.push("lang=en"),lpTag.section=chatSectionArr}}null==response.consumerIdentfier||"CRS_FUSION_SRV"!==response.consumerIdentfier&&"CRS_FUSION_ACQ"!==response.consumerIdentfier||(chatLPCustomerInfo=getCustomerInfo(response.consumerIdentfier),"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&lpTag.sdes.push(chatLPCustomerInfo)),null==response.consumerIdentfier||"CitiManager"!==response.consumerIdentfier&&"CCMS"!==response.consumerIdentfier&&"CCRS"!==response.consumerIdentfier||(sendLPServiceInfo(),sendLPViewedProductInfo()),!0===lpResourcesLoadedFlag&&sendLPVars(),"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&(lpTagSdes=lpTag.sdes)}}else!1===response.chatFeatureEnabledFlag&&(chatShowView=!1)}function sendLPVars(){var pageURL=document.URL;"undefined"!=typeof lpTag&&void 0!==lpTag.newPage&&void 0!==lpTag.section&&lpTag.newPage(pageURL,{section:chatSectionArr,sdes:[getCustomerInfo()]}),"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&void 0!==lpTag.sdes.send&&lpTag.sdes.send()}function sendLPCustomerInfo(){"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&lpTag.sdes.push(getCustomerInfo())}function sendLPPersonalInfo(){"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&lpTag.sdes.push(getPersonalInfo())}function sendLPServiceInfo(){"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&lpTag.sdes.push(getServiceInfo())}function sendLPViewedProductInfo(){"undefined"!=typeof lpTag&&void 0!==lpTag.sdes&&lpTag.sdes.push(getViewedProductInfo())}function setLPSecVars(name,value){if(null!=chatConsumer&&"CRS_FUSION_SRV"===chatConsumer){var lpSectionArray=["copsuser","partnertype","pagename","unit","modulename","moduleviewpage","messagecentertopic","loggedout"];if(void 0!==name&&null!=name&&""!==name&&void 0!==value){for(var i=0;i<lpSectionArray.length;i++)name===lpSectionArray[i]&&(chatSectionArr[i]=value);sendLPVars()}}}function setChatPayload(payload){void 0!==payload&&null!=payload&&(chatPayloadJson=payload)}function setUserIdentifier(userId){void 0!==userId&&(userIdentifier=userId)}function setCompanyIdentifier(companyId){void 0!==companyId&&(companyIdentifier=companyId)}function isScreenIdPreLogin(preLoginScreenId){if(null==preLoginScreenId||""===preLoginScreenId)return!1;return-1!==preLoginScreenId.indexOf("-PreLogin",preLoginScreenId.length-"-PreLogin".length)}