(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/xlt":function(t,e,i){"use strict";i.d(e,"a",function(){return d});var n=i("ofXK"),o=i("uZ9b"),r=i("rB/E"),s=i("IguY"),a=i("WwcI"),c=i("hV3Y"),l=i("6+4f"),h=i("fXoL");let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.Ub({type:t}),t.\u0275inj=h.Tb({providers:[o.a,s.a,a.a,c.s,l.a],imports:[[n.c,r.v,r.Oc,r.Db,r.xb,r.V,r.Tb]]}),t})()},"6+4f":function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("hV3Y"),o=i("fXoL"),r=i("tyNb");let s=(()=>{class t{constructor(t,e,i,n,o){this.activeRoute=t,this.UserService=e,this.storageService=i,this.windowRef=n,this.router=o,this.pb={},this.BtaRegion=["CA","CT","DC","FL","IL","MD","NJ","NV","NY","VA"],this.PackageMapping={1:"Package_CBA",2:"Package_GoldPremium",3:"Package_GoldRegular",4:"Package_CPBRegular",5:"Package_CitiPriority",6:"Package_BasicBlue",7:"Package_AccessBlue",8:"Package_CitiElevate",10:"Package_CitiGoldPrivateClient"},this.sessionValuePropIds={Package_CitiGoldPrivateClient:"003"},this.whitelistUrls=["/US/ag/open-cs-acct/index","/US/ag/current-interest-rates/ira","/US/ag/current-interest-rates/cd","/US/ag/current-interest-rates/checking-saving-accounts","/US/ag/current-interest-rates","/US/ag/open-a-bank-account/cd","/US/ag/open-a-bank-account/checking-saving","/US/ag/current-interest-rates","/US/ag/open-a-bank-account","/US/ag/banking/citi-elevate","/US/ag/banking/citi-accelerate-savings","/US/ag/certificates-of-deposit","/US/banking/cd-ira/citi.action?ID=citi-ira","/US/banking/citi.action?ID=savings-account-overview","/US/banking/checking/citi.action?ID=access-account","/US/banking/checking/citi.action?ID=basic-banking-account","/US/banking/checking/citi.action?ID=citibank-account","/US/banking/checking/citi.action?ID=citigold","/US/banking/checking/citi.action?ID=citi-priority","/US/banking/cd-ira/citi.action?ID=certificates-of-deposit","/US/banking/citi.action?ID=banking-overview","/US/banking/citi.action?ID=savings-account-overview","/US/banking/citi.action?ID=cd-ira-account-overview","/US/banking/savings/citi.action?ID=citi-savings","/US/banking/citi.action?ID=checking-account-overview"],this.replaceOnHost=["localhost","127.0.0.1"],this._window=this.windowRef.nativeWindow,this.getUserInfo()}init(){this.pb=this.UserService.getPersonalizationData().personalization,this.setAPIInformation()}filterUrlInLocal(t){if(this._window)return this.replaceOnHost.includes(this._window.location.hostname)?t.replace("/US/ag/","/"):t}isUserLogin(){let t=this.UserService.getPersonalizationData().personalization;return t.isMember&&!t.isRELOnlyUser&&!t.isSPFMigrated&&!t.isBusinessOnly}extractQueryParams(t=null){var e={};return(t=t||window.location.href).replace(/[?&]+([^=&]+)=([^&]*)/gi,(t,i,n)=>e[i]=n),e}manageQueryParams(t,e=null){let i="&",n=window.location.href,o=this.activeRoute.snapshot.queryParams;e&&(o=this.extractQueryParams());let r=!!this.whitelistUrls.find(t=>n.indexOf(this.filterUrlInLocal(t))>=0);return["true","false"].includes(o.enable_zipcode)&&r&&!this.isUserLogin()&&(i=t.includes("?")?"&":"?",t=`${t}${i}enable_zipcode=${o.enable_zipcode}`),t}isRegionSelectorInFallback(t,e=null){let i=!0,n=e||this.activeRoute.snapshot.queryParams,o=sessionStorage.sessionPostBrandingStorage?JSON.parse(sessionStorage.sessionPostBrandingStorage):{};return t="boolean"==typeof t?t:"true"===t,i=this.isUserLogin()?o.flexWhiteListedUser&&t||!t||"true"==n.enable_zipcode:["true","false"].includes(n.enable_zipcode)?"true"===n.enable_zipcode:!t,!i}appendQuery(t,e={}){if(0===Object.keys(e).length)return t;let i=t.includes("?")?"&":"?";return t+i+Object.keys(e).map(t=>t+"="+e[t]).join("&")}sortAlphaNumeric(t,e,i=!0){let n,o=/[^a-zA-Z]/g,r=/[^0-9]/g;if(isNaN(t)||isNaN(e)){let s=t.replace(o,""),a=e.replace(o,"");if(s===a){let i=parseInt(t.replace(r,""),10),o=parseInt(e.replace(r,""),10);n=i===o?0:i>o?1:-1}else n=s>a?1:-1;return i?n:1===n?-1:1}return i?Number(t)-Number(e):Number(e)-Number(t)}setAPIInformation(){this.PricingRegion=this.storageService.get("PricingRegion",n.q.COOKIE)||null,this.GoverningState=this.storageService.get("GoverningState",n.q.COOKIE)||null,this.ResidentialState=this.storageService.get("ResidentialState",n.q.COOKIE)||null,this.PostalCode=this.storageService.get("zipcode",n.q.COOKIE)||null;let t=this.storageService.get("FIMPBranch",n.q.COOKIE)||"";if(this.FIMP=t.split("|")[0]||null,this.Branch=t.split("|")[1]||null,this.isBtaUser=this.isInBtaRegion(),this.pb.isMember){let t=sessionStorage.sessionPostBrandingStorage?JSON.parse(sessionStorage.sessionPostBrandingStorage):{};this.PostalCode=(t.postalCode||"").toString().slice(0,5)}}isInBtaRegion(t=null){let e=this.storageService.get("PricingRegion",n.q.COOKIE)||null,i=t||this.storageService.get("ResidentialState",n.q.COOKIE);return e?"IN"===e:this.BtaRegion.includes(i)}pluckFromObject(t,e=[]){return Object.keys(t).forEach(i=>{e.includes(i)||delete t[i]}),t}handleRangeTranslation(t){return"es_US"===this.storageService.get("locale")&&(t.includes("Below")?t=t.replace("Below","Menos de"):t.includes("-")?t=`de ${t.replace("-","a")}`:t.includes("+")?t=t.replace("+"," o m\xe1s"):t.includes("All balance ranges")&&(t="Todos los\xa0rangos\xa0de saldo")),t}replaceObject(t={},e={}){let i=JSON.stringify(t);return Object.keys(e).forEach(t=>{i=i.replace(new RegExp(t,"g"),e[t])}),JSON.parse(i)}returnCDMTiers(t){let e=t,i=[];return[{min:"0",max:"9999.99",range:"Below $10,000"},{min:"10000",max:"24999.99",range:"$10,000 - $24,999.99"},{min:"25000",max:"49999.99",range:"$25,000 - $49,999.99"},{min:"50000",max:"99999.99",range:"$50,000 - $99,999.99"},{min:"1000000",max:"499999.99",range:"$100,000 - $499,999.99"},{min:"500000",max:"999999.99",range:"$500,000 - $999,999.99"},{min:"10000000",max:"",range:"$1,000,0000+"}].forEach(t=>{let n=t.max,o=e[0];if(o){let r=o.max,s=Object.assign({},o);s.min=t.min,s.max=t.max,s.range=t.range,i.push(s),Number(r)!=Number(n)&&Number(r)!=Number(n)+.01||(e=e.filter(t=>t!==o))}}),i}initTagging(t,e={}){t=this.replaceObject(t,e),window}getUserInfo(){this.userInfo=this.UserService.getPersonalizationData().personalization}isUpgradeEligible(t=null){const e={Package_CitiPriority:this.userInfo.isMember&&!this.userInfo.isIPB&&!this.userInfo.isGEB&&!this.userInfo.isCitiPrivateBanking&&!this.userInfo.isRELOnlyUser&&!this.userInfo.isCitigold&&!this.userInfo.isCitipriority&&!("SPF"===this.userInfo.customerType),Package_GoldRegular:this.userInfo.isMember&&!this.userInfo.isIPB&&!this.userInfo.isGEB&&!this.userInfo.isCitiPrivateBanking&&!this.userInfo.isRELOnlyUser&&!this.userInfo.isCitigold&&!("SPF"===this.userInfo.customerType)};return t?!!e[t]:e}isSuppressed(){const t=this.storageService.get("sessionPostBrandingStorage");if(!t)return;const e=JSON.stringify(t),i="Y"==JSON.parse(e).hasSBOB;return!(!this.userInfo.isMember||!(this.userInfo.isIPB||this.userInfo.isGEB||i||this.isCPC(e)))}isCPC(t){const e=JSON.parse(t);let i;return e.serviceLinksBean.valuePropIds&&(i=e.serviceLinksBean.valuePropIds.find(t=>t===this.sessionValuePropIds.Package_CitiGoldPrivateClient)),!(!this.userInfo.isCPC&&!i)}redirectToDashboard(){this.router.navigate(["/US/ag/accountdetails"])}}return t.\u0275fac=function(e){return new(e||t)(o.gc(r.a),o.gc(n.s),o.gc(n.q),o.gc(n.v),o.gc(r.h))},t.\u0275prov=o.Sb({token:t,factory:t.\u0275fac}),t})()},IguY:function(t,e,i){"use strict";i.d(e,"a",function(){return c});var n=i("fXoL"),o=i("lJxs"),r=i("LvDl"),s=i("7eTr"),a=i("hV3Y");let c=(()=>{class t{constructor(t,e,i){this._http=t,this.windowRef=e,this.appConfig=i,this.onDataReady=new n.n,this.onError=new n.n,this.btaRegion=new n.n,this.selectedFromDropdown=!1,this.isCDTabClicked=!1,this.onError2=new n.n,this.dispatchTNC=new n.n,this.selectedState=new n.n,this.getStartedBtnClicked=!1,this.requestPayload=[{access:["certificate-of-deposit"],payload:{bankingRelationshipNumber:[1,2,3,4,5,6,7,8],cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd"]}},{access:["current-interest-rates"],payload:{bankingRelationshipNumber:[1,2,3,4,5,6,7,8,10],requestFlow:"AccountOpeningMarketing",cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd","3 Month Retirement CD","4 Month Retirement CD","5 Month Retirement CD","6 Month Retirement CD","7 Month Retirement CD","8 Month Retirement CD","9 Month Retirement CD","10 Month Retirement CD","13 Month Retirement CD","18 Month Fixed Retirement CD","30 Month Retirement CD","1 Year Retirement CD","2 Year Retirement CD","3 Year Retirement CD","4 Year Retirement CD","5 Year Retirement CD","Step Up CD","No Penalty CD"],productTypeCodes:["retirement_money_market","retirement_day_to_day_savings","18_m_variable_retirement","Citi Savings Account","INTEREST CHECKING","Money Market Account2","CitiGold Interest Checking"]}},{access:["citi-accelerated-savings"],payload:{bankingRelationshipNumber:[1,2,3,4,5,6,7,8,10],requestFlow:"AccountOpeningMarketing",cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd","3 Month Retirement CD","4 Month Retirement CD","5 Month Retirement CD","6 Month Retirement CD","7 Month Retirement CD","8 Month Retirement CD","9 Month Retirement CD","10 Month Retirement CD","13 Month Retirement CD","18 Month Fixed Retirement CD","30 Month Retirement CD","1 Year Retirement CD","2 Year Retirement CD","3 Year Retirement CD","4 Year Retirement CD","5 Year Retirement CD","Step Up CD","No Penalty CD"],productTypeCodes:["retirement_money_market","retirement_day_to_day_savings","18_m_variable_retirement","Citi Savings Account","INTEREST CHECKING","Money Market Account2","CitiGold Interest Checking"]}},{access:["citi-elevate"],payload:{bankingRelationshipNumber:[8]}},{access:["cd","checking-saving"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[1,3,5,6,7,8,10],productTypeCodes:["Citi Savings Account","INTEREST CHECKING","Money Market Account2","CitiGold Interest Checking"],cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd","Step Up CD","No Penalty CD"]}},{access:["checking-account","savings-account","compare-account-packages"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[1,3,5,6,7,8,10],productTypeCodes:["Citi Savings Account","INTEREST CHECKING","Money Market Account2","CitiGold Interest Checking"]}},{access:["citi-savings"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[1,3,5,6,7,10],productTypeCodes:["Citi Savings Account"]}},{access:["access-account"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[7],productTypeCodes:["Citi Savings Account","Money Market Account2"]}},{access:["priority"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[5],productTypeCodes:["INTEREST CHECKING","Citi Savings Account","Money Market Account2"]}},{access:["gold"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[3],productTypeCodes:["INTEREST CHECKING","Citi Savings Account","Money Market Account2"]}},{access:["banking-overview","special-offers"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[7],productTypeCodes:["Money Market Account2"]}},{access:["cod"],payload:{requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[1],cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd","Step Up CD","No Penalty CD"]}}]}getEndpoint(){return this.appConfig.getConfig("apiServerUrl")+"/bank/rates/retrieve"}generatePayload(t,e){e=e||{};let i=this.requestPayload.find(e=>e.access.find(e=>t.indexOf(e)>=0));return i?r.assign(Object.assign({},i.payload),e):e}cleanObject(t){for(var e in t)null!=t[e]&&t[e]||delete t[e];return t}fetchRatesData(t,e,i,n,s,a=!1){s=s.startsWith("http")?this.windowRef.nativeWindow.location.href:s;let c=t&&!isNaN(t),l={fimp:e,branchId:i};return l=c&&String(t).length>0?r.assign(l,{[c?"postalCode":"state"]:t}):r.assign(l,{governingState:n}),l=this.generatePayload(s,l),l=this.cleanObject(l),l=r.assign(l,{enableRES:a}),l.hasOwnProperty("bankingRelationshipNumber")||l.hasOwnProperty("requestFlow")||l.hasOwnProperty("productTypeCodes")||(l=r.pick(l,["postalCode","state"])),this._http.post(this.getEndpoint(),l).pipe(Object(o.a)(t=>r.assign(t,{enableRES:l.enableRES||!1})))}}return t.\u0275fac=function(e){return new(e||t)(n.gc(s.g),n.gc(a.v),n.gc(a.a))},t.\u0275prov=n.Sb({token:t,factory:t.\u0275fac}),t})()},WwcI:function(t,e,i){"use strict";i.d(e,"a",function(){return c});var n=i("fXoL"),o=i("lJxs"),r=i("7eTr"),s=i("hV3Y"),a=i("tk/3");let c=(()=>{class t{constructor(t,e,i){this._http=t,this.appConfig=e,this.http=i,this.is_devEnv=!0,this.onDataReady=new n.n,this.onError=new n.n,this.onError2=new n.n,this.dispatchTNC=new n.n,this.selectedState=new n.n,this.getStartedBtnClicked=!1,this.url=this.is_devEnv?this.appConfig.getConfig("apiServerUrl")+"/bank/rates/retrieve":"https://sd-9ea5-6df7.nam.nsroot.net:8809/bank/rates/retrieve"}fetchRatesJSON(t,e,i,n,r=!1){let s;if(this.is_devEnv)return s=-1!=window.location.href.indexOf("banking")||-1!=window.location.href.indexOf("cd")||-1!=window.location.href.indexOf("checking-saving")?{enableRES:r,fimp:e,branchId:i,governingState:n,state:t,requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[1,2,3,4,5,6,7,8],productTypeCodes:["Citi Savings Account","INTEREST CHECKING","Money Market Account2"],cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd","Step Up CD","No Penalty CD"]}:{fimp:e,branchId:i,governingState:n,state:t},this._http.post(this.url,s);{s={fimp:"014",branchId:"00788",governingState:"CA",state:"",requestFlow:"AccountOpeningMarketing",bankingRelationshipNumber:[1,2,3,4,5,6,7,8],productTypeCodes:["Citi Savings Account","INTEREST CHECKING","Money Market Account2"],cdTenurePeriods:["3 Month CD","4 Month CD","5 Month CD","6 Month CD","7 Month CD","8 Month CD","9 Month CD","10 Month CD","11 Month CD","1 year Cd","13 Month CD","14 Month CD","15 Month CD","18 Month CD","2 Year Cd","30 Month CD","3 Year Cd","4 Year Cd","5 Year Cd","Step Up CD","No Penalty CD"]};let t=JSON.stringify(s);return this.http.post(this.url,t).pipe(Object(o.a)(t=>t))}}}return t.\u0275fac=function(e){return new(e||t)(n.gc(r.g),n.gc(s.a),n.gc(a.b))},t.\u0275prov=n.Sb({token:t,factory:t.\u0275fac}),t})()},"t/un":function(t,e,i){"use strict";i.d(e,"a",function(){return M});var n=i("fXoL"),o=i("ofXK"),r=i("hV3Y"),s=i("Ampu"),a=i("IguY"),c=i("WwcI"),l=i("6+4f"),h=i("tyNb"),d=i("rB/E");let u=(()=>{class t{constructor(t,e,i){this.el=t,this.renderer=e,this._document=i,this.placement="bottom",this.offset=10}onMouseEnter(){this.tooltip||this.show()}onMouseLeave(){this.tooltip&&this.hide()}onClick(){this.tooltip&&this.hide()}onFocus(){this.tooltip&&this.show()}onBlur(){this.tooltip&&this.hide()}show(){this.showTooltip&&this.tooltipTitle&&(this.create(),this.setPosition(),this.renderer.addClass(this.tooltip,"x-hover-tooltip-show"))}hide(){this.renderer.removeClass(this.tooltip,"x-hover-tooltip-show"),window.setTimeout(()=>{this.renderer.removeChild(this._document.body,this.tooltip),this.tooltip=null},this.delay)}create(){this.tooltip=this.renderer.createElement("span"),this.renderer.appendChild(this.tooltip,this.renderer.createText(this.tooltipTitle)),this.renderer.appendChild(document.body,this.tooltip),this.renderer.addClass(this.tooltip,"x-hover-tooltip"),this.renderer.addClass(this.tooltip,`x-hover-tooltip-${this.placement}`),this.renderer.setStyle(this.tooltip,"-webkit-transition",`opacity ${this.delay}ms`),this.renderer.setStyle(this.tooltip,"-moz-transition",`opacity ${this.delay}ms`),this.renderer.setStyle(this.tooltip,"-o-transition",`opacity ${this.delay}ms`),this.renderer.setStyle(this.tooltip,"transition",`opacity ${this.delay}ms`)}setPosition(){const t=this.el.nativeElement.getBoundingClientRect(),e=this.tooltip.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;let n,o;"top"===this.placement&&(n=t.top-e.height-this.offset,o=t.left+(t.width-e.width)/2),"bottom"===this.placement&&(n=t.bottom+this.offset,o=t.left+(t.width-e.width)/2),"left"===this.placement&&(n=t.top+(t.height-e.height)/2,o=t.left-e.width-this.offset),"right"===this.placement&&(n=t.top+(t.height-e.height)/2,o=t.right+this.offset),this.renderer.setStyle(this.tooltip,"top",`${n+i}px`),this.renderer.setStyle(this.tooltip,"left",`${o}px`)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(n.l),n.Wb(n.G),n.Wb(o.e))},t.\u0275dir=n.Rb({type:t,selectors:[["","xHoverTooltip",""]],hostBindings:function(t,e){1&t&&n.kc("mouseenter",function(){return e.onMouseEnter()})("mouseleave",function(){return e.onMouseLeave()})("click",function(){return e.onClick()})("focus",function(){return e.onFocus()})("focusout",function(){return e.onBlur()})},inputs:{tooltipTitle:["hoverTooltipText","tooltipTitle"],showTooltip:["xHoverTooltip","showTooltip"],placement:"placement",delay:"delay"}}),t})();const g=["zipcodeSelectorForm"],p=["zipcodeInput"];function C(t,e){if(1&t){const t=n.dc();n.cc(0,"citi-cta",17),n.kc("click",function(){n.Vc(t);const e=n.oc(3);return e.showModal=!e.showModal}),n.bc()}if(2&t){const t=n.oc(3);n.xc("value",null==t.modalContent?null:t.modalContent.btn_change_label)}}function m(t,e){if(1&t){const t=n.dc();n.cc(0,"div",3),n.cc(1,"citi-form-container",null,4),n.cc(3,"p"),n.Xb(4,"span",5),n.cc(5,"span",6),n.cc(6,"citi-tooltip",7),n.kc("click",function(e){return n.Vc(t),n.oc(2).showZipCodeModal(e)})("showChange",function(e){return n.Vc(t),n.oc(2).showTooltip=e}),n.bc(),n.bc(),n.cc(7,"span",8),n.hd(8,C,1,1,"citi-cta",9),n.bc(),n.bc(),n.cc(9,"citi-modal",10),n.kc("primaryButtonClick",function(){return n.Vc(t),n.oc(2).saveChanges()})("secondaryButtonClick",function(){return n.Vc(t),n.oc(2).toggleModal()})("closeButtonClick",function(){return n.Vc(t),n.oc(2).toggleModal()})("showChange",function(e){return n.Vc(t),n.oc(2).modalVisibilityStatus(e)})("showChange",function(e){return n.Vc(t),n.oc(2).showModal=e}),n.cc(10,"div",11),n.cc(11,"div",12),n.Xb(12,"p",13),n.Xb(13,"p",5),n.bc(),n.cc(14,"div",14),n.cc(15,"citi-input",15,16),n.kc("keyup",function(){return n.Vc(t),n.oc(2).hasCustomError=!1}),n.bc(),n.bc(),n.bc(),n.bc(),n.bc(),n.bc()}if(2&t){const t=n.oc(2);n.Db(4),n.xc("innerText",null==t.modalContent?null:t.modalContent.display_text),n.Db(2),n.xc("show",t.showTooltip)("tooltipBody",t.showTooltip?t.toolTipBodyText():null==t.modalContent?null:t.modalContent.hover_tooltip_text)("xHoverTooltip",!t.showTooltip)("hoverTooltipText",null==t.modalContent?null:t.modalContent.hover_tooltip_text)("buttonLabel",null==t.modalContent?null:t.modalContent.tooltip_ada_text),n.Db(2),n.xc("ngIf",t.canUpdate),n.Db(1),n.yc("cancelButtonText",null==t.modalContent||null==t.modalContent.modal?null:t.modalContent.modal.btn_cancel_label),n.xc("primaryButtonText",null==t.modalContent||null==t.modalContent.modal?null:t.modalContent.modal.btn_save_label)("show",t.showModal),n.Db(3),n.xc("innerText",null==t.modalContent||null==t.modalContent.modal?null:t.modalContent.modal.label),n.Db(1),n.xc("innerText",null==t.modalContent||null==t.modalContent.modal?null:t.modalContent.modal.description),n.Db(2),n.xc("label",null==t.modalContent||null==t.modalContent.input?null:t.modalContent.input.label)("placeholder",null==t.modalContent||null==t.modalContent.input?null:t.modalContent.input.placeholder)("value",t.zipcode)("hasCustomError",t.hasCustomError)("customErrorMessage",null==t.modalContent||null==t.modalContent.input?null:t.modalContent.input.error_messages.required)("requiredError",null==t.modalContent||null==t.modalContent.input?null:t.modalContent.input.error_messages.required)("minLengthError",null==t.modalContent||null==t.modalContent.input?null:t.modalContent.input.error_messages.length)}}function b(t,e){if(1&t&&(n.cc(0,"citi-tools-e2"),n.hd(1,m,17,19,"div",2),n.bc()),2&t){const t=n.oc();n.Db(1),n.xc("ngIf",t.showPickerPanel)}}function f(t,e){if(1&t){const t=n.dc();n.cc(0,"citi-modal",18),n.kc("showChange",function(e){return n.Vc(t),n.oc().showErrorModal=e})("primaryButtonClick",function(){n.Vc(t);const e=n.oc();return e.showErrorModal=e.showPickerPanel=!1})("closeButtonClick",function(){n.Vc(t);const e=n.oc();return e.showErrorModal=e.showPickerPanel=!1}),n.Xb(1,"div",19),n.Xb(2,"p",20),n.bc()}if(2&t){const t=n.oc();n.xc("show",t.showErrorModal)("primaryButtonText",null==t.modalContent||null==t.modalContent.error?null:t.modalContent.error.btn_ok),n.Db(1),n.xc("innerHTML",null==t.modalContent||null==t.modalContent.error?null:t.modalContent.error.message.label,n.Wc),n.Db(1),n.xc("innerHTML",null==t.modalContent||null==t.modalContent.error?null:t.modalContent.error.message.description,n.Wc)}}let M=(()=>{class t{constructor(t,e,i,o,r,s,a,c,l,h,d,u){this.globalFn=t,this.Cookie=e,this.Storage=i,this.RateService=o,this.Rate=r,this.UserService=s,this.activeRoute=a,this.elRef=c,this.windowRef=l,this.el=h,this.renderer=d,this.platformId=u,this._window={},this.contentData={},this.modalContent={},this.userInfo={},this.redirectUrl="/US/login.do",this.sessionData={},this.canUpdate=!0,this.showModal=!1,this.showTooltip=!1,this.showErrorModal=!1,this.hasCustomError=!1,this.showPickerPanel=!0,this.isLogin=!1,this.zipcode=null,this.GoverningState=null,this.PricingRegion=null,this.suppressPickerFor=["/US/ag/banking/citi-elevate"],this.BtaRedirect=[{page:"banking/citi-accelerate-savings",redirectTo:"/US/banking/savings/citi.action?ID=citi-savings"}],this.showPicker=!0,this.isResEnable=!1,this.fallbackChange=new n.n,this.getRetriveStatus=new n.n,this.zipcodeChanged=new n.n,this.rateErrorEvent=new n.n,this.modalVisible=new n.n,this.formSubmitted=new n.n}set isRetriveFail(t){this.showErrorModal=t}ngAfterViewInit(){}ngOnInit(){this._window=this.windowRef.nativeWindow,this.targetPage=this.targetPage||this._window.location.href,this.suppressPickerFor=this.suppressPickerFor.map(t=>["localhost","127.0.0.1"].includes(this._window.location.hostname)?t.replace("/US/ag/","/"):t),this.hasRateError(),this.updateCookiedVariables(),this.getStaticContent()}toolTipBodyText(){return Object(o.G)(this.platformId)&&(this.isLogin?this.modalContent.postlogin_tootltip_text:this.modalContent.prelogin_tootltip_text).replace("[zipcode]",this.zipcode||"000000")}showZipCodeModal(t){t.target&&"A"===t.target.tagName&&(t.preventDefault(),this.showModal=!this.showModal,this.showTooltip=!1)}updateCookiedVariables(){this.zipcode=this.Storage.get("zipcode",r.q.COOKIE),this.GoverningState=this.Storage.get("GoverningState",r.q.COOKIE),this.PricingRegion=this.Storage.get("PricingRegion",r.q.COOKIE),this.userInfo=this.UserService.getPersonalizationData().personalization,this.sessionData=sessionStorage.sessionPostBrandingStorage?JSON.parse(sessionStorage.sessionPostBrandingStorage):{}}doBtaRedirect(){const t=this.BtaRedirect.find(t=>this._window.location.href.indexOf(t.page)>=0);t&&"IN"===this.PricingRegion&&(this._window.location.href=this.globalFn.manageQueryParams(t.redirectTo))}getStaticContent(){this.activeRoute.data.subscribe(t=>{var e;t&&(this.contentData=t,this.modalContent=(null===(e=t.PackageCommonData)||void 0===e?void 0:e.zipcodeselector)||(t.MappingServiceData||t.MyContentService||t.oaCommonData).zipcodeselector.content,this.togglePicker())})}togglePicker(){this.activeRoute.queryParams.subscribe(t=>{this.isLogin=this.setIsLogin(),this.showPicker=this.isLogin?this.sessionData.flexWhiteListedUser&&this.isFallback()||!this.isFallback()||"true"===t.enable_zipcode:"true"===t.enable_zipcode||"false"===t.enable_zipcode?"true"===t.enable_zipcode:!this.isFallback(),this.fallbackChange.emit(!this.showPicker),this.showPicker&&this.getRatesOrPrompt(t)})}isFallback(){let t=this.contentData.PackageCommonData.MarketingPageConfig,e=this.contentData.oaCommonData||this.contentData.MappingServiceData||this.contentData.MyContentService;return t?"true"===t.isZipcodeFallback:e&&"true"===e.Flexpricing.content.isZipcodeFallback}toggleModal(){this.GoverningState||this.showModal||(this._window.location.href=this.redirectUrl)}setIsLogin(){return this.userInfo.isMember&&!this.userInfo.isRELOnlyUser&&!this.userInfo.isBusinessOnly}getRatesOrPrompt(t=null){if(!this.isLogin&&t&&t.hasOwnProperty("zip")&&this.suppressPickerFor.includes(this._window.location.pathname))return t.zip&&5===t.zip.length?this.getRatesAndCookied(t.zip):this.showModal=!0,void(this.zipcode=5===t.zip.length?t.zip:null);if(this.isLogin){this.canUpdate=!1;const t=(this.userInfo.postalCode||this.sessionData.postalCode||"").toString().slice(0,5);this.Cookie.set("ResidentialState",this.userInfo.residentialState,365,"/"),this.getRatesAndCookied(t)}else this.GoverningState?this.canUpdate=!0:this.showModal=!0}saveChanges(){if(this.zipcodeSelectorForm.validate(),this.zipcodeSelectorForm.hasErrors)return;const t=this.zipcodeInput.value;this.getRatesAndCookied(t),this.formSubmitted.emit(t)}getRatesAndCookied(t){this.globalFn.setAPIInformation(),this.RateService.fetchRatesData(t,this.globalFn.FIMP||"",this.globalFn.Branch||"",this.globalFn.GoverningState||"",this.targetPage,this.isResEnable).subscribe(e=>{e.zipcode&&"invalid"===e.zipcode?this.isLogin?this.showErrorModal=!0:this.hasCustomError=this.showModal=!0:0===e.status||1!==e.code?(this.showModal=!1,this.hasCustomError=!1,this.Cookie.set("zipcode",t,365,"/"),this.Cookie.set("GoverningState",e.governingState,365,"/"),this.Cookie.set("FIMPBranch",`${e.fimp}|${e.branchId}`,365,"/"),this.Cookie.set("PricingRegion",e.pricingRegion,365,"/"),this.updateCookiedVariables(),this.doBtaRedirect(),this.RateService.onDataReady.emit(e.bankingCdmRates),this.Rate.onDataReady.emit(e),this.showErrorModal=!1,this.zipcodeChanged.emit(),this.getRetriveStatus.emit(!0)):(this.showErrorModal=!0,this.getRetriveStatus.emit(!1))},t=>{this.showModal=!1,this.showErrorModal=!0,this.rateErrorEvent.emit(null),this.getRetriveStatus.emit(!1),this.RateService.onDataReady.error(t),this.Rate.onDataReady.error(t)})}hasRateError(){this.RateService.onError.subscribe(t=>{this.showErrorModal=t,this.getRetriveStatus.emit(!1)}),this.Rate.onError.subscribe(t=>{this.showErrorModal=t,this.getRetriveStatus.emit(!1)})}modalVisibilityStatus(t){this.modalVisible.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(l.a),n.Wb(s.UnmanagedCookieService),n.Wb(r.q),n.Wb(a.a),n.Wb(c.a),n.Wb(r.s),n.Wb(h.a),n.Wb(n.l),n.Wb(r.v),n.Wb(n.l),n.Wb(n.G),n.Wb(n.D))},t.\u0275cmp=n.Qb({type:t,selectors:[["app-zipcode-selector"]],viewQuery:function(t,e){if(1&t&&(n.ud(g,1),n.ud(p,1)),2&t){let t;n.Qc(t=n.lc())&&(e.zipcodeSelectorForm=t.first),n.Qc(t=n.lc())&&(e.zipcodeInput=t.first)}},inputs:{targetPage:"targetPage",showPicker:"showPicker",isResEnable:"isResEnable",isRetriveFail:"isRetriveFail"},outputs:{fallbackChange:"fallbackChange",getRetriveStatus:"getRetriveStatus",zipcodeChanged:"zipcodeChanged",rateErrorEvent:"rateErrorEvent",modalVisible:"modalVisible",formSubmitted:"formSubmitted"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"show","primaryButtonText","showChange","primaryButtonClick","closeButtonClick",4,"ngIf"],["content1","",4,"ngIf"],["content1",""],["zipcodeSelectorForm",""],[1,"fs-16",3,"innerText"],[1,"mrl-20"],["descriptionId","tooltip-0","position","bottom",3,"show","tooltipBody","xHoverTooltip","hoverTooltipText","buttonLabel","click","showChange"],[1,"fs-16"],["idStr","btn-switch-zipcode","type","tertiary",3,"value","click",4,"ngIf"],["idStr","zipcode-modal","showCancelButton","true",3,"cancelButtonText","primaryButtonText","show","primaryButtonClick","secondaryButtonClick","closeButtonClick","showChange"],[1,"row"],[1,"mb-30"],["tabindex","-1",1,"zipcode-h2",3,"innerText"],[1,"col-md-6","col-sm-12","col-xs-12"],["idStr","zipcode","type","number","required","true","maxlength","5","minlength","5","min","1","name","zipcode",3,"label","placeholder","value","hasCustomError","customErrorMessage","requiredError","minLengthError","keyup"],["zipcodeInput",""],["idStr","btn-switch-zipcode","type","tertiary",3,"value","click"],[3,"show","primaryButtonText","showChange","primaryButtonClick","closeButtonClick"],["title","",3,"innerHTML"],[3,"innerHTML"]],template:function(t,e){1&t&&(n.hd(0,b,2,1,"citi-tools-e2",0),n.hd(1,f,3,4,"citi-modal",1)),2&t&&(n.xc("ngIf",e.showPicker&&e.modalContent),n.Db(1),n.xc("ngIf",e.showPicker))},directives:[o.q,d.oe,d.Eb,d.qe,u,d.Pc,d.Wb,d.w],styles:[".mrl-20[_ngcontent-%COMP%]{margin-right:18px;margin-left:18px}.fs-16[_ngcontent-%COMP%]{font-size:16px!important}.mb-30[_ngcontent-%COMP%]{margin-bottom:30px}.pl-0[_ngcontent-%COMP%]{padding-left:0!important}.zipcode-h2[_ngcontent-%COMP%]{font-size:2.625rem!important;line-height:3.125rem!important;font-family:Interstate_Light,sans-serif;color:#333;margin-bottom:30px!important;font-weight:400;text-transform:none;letter-spacing:normal}@media screen and (max-width:425px){.zipcode-h2[_ngcontent-%COMP%]{font-size:1.625rem!important;line-height:2rem}}",'.x-hover-tooltip{position:absolute;max-width:150px;font-size:14px;text-align:center;color:#333;padding:3px 8px;background-color:#eee;border-radius:4px;box-shadow:0 1px 4px rgba(0,0,0,.5);z-index:1000;opacity:0}  .x-hover-tooltip:after{content:"";position:absolute;border-style:solid}  .x-hover-tooltip-top:after{top:100%;left:50%;margin-left:-5px;border-width:5px;border-color:#eee rgba(0,0,0,0) rgba(0,0,0,0)}  .x-hover-tooltip-bottom:after{bottom:100%;left:50%;margin-left:-5px;border-width:5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #eee}  .x-hover-tooltip-left:after{top:50%;left:100%;margin-top:-5px;border-width:5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #eee}  .x-hover-tooltip-right:after{top:50%;right:100%;margin-top:-5px;border-width:5px;border-color:rgba(0,0,0,0) #eee rgba(0,0,0,0) rgba(0,0,0,0)}  .x-hover-tooltip-show{opacity:1}']}),t})()},uZ9b:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i("lJxs"),o=i("fXoL"),r=i("7eTr");let s=(()=>{class t{constructor(t){this.contentService=t}resolve(t,e){return this.getContent()}getContent(){return this.contentService.getStaticBundle("region_selector").pipe(Object(n.a)(t=>{let e={};for(let i in t)e[i.split("$$")[1]]=t[i];return e}))}}return t.\u0275fac=function(e){return new(e||t)(o.gc(r.b))},t.\u0275prov=o.Sb({token:t,factory:t.\u0275fac}),t})()}}]);